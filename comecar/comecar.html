<!DOCTYPE html>
<html lang="pt">
<head>
  <title>comecar</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="../css/style.css">
  <link href="https://fonts.googleapis.com /css2?family=Poppins:wght@700& display=swap" rel="stylesheet">
  <style>
    html,body,h1,h2,h3,h4,pre {font-family:"Lato", sans-serif}
    .mySlides {display:none}
    .w3-tag, .fa {cursor:pointer}
    .w3-tag {height:15px;width:15px;padding:0;margin-top:6px}
  </style>
</head>
<body>

<!-- Modo escuro e claro -->

  <input type="checkbox" id="theme-switch">
<i class="fa-solid fa-arrow-left" onclick="history.back()" style="cursor: pointer; margin: 10px; font-size: 25px"></i>
  <!-- Contact -->
<div class="w3-container" style="margin-top: -70px;">
  <div class="w3-center w3-padding-64" id="contact">
    <span class="w3-xlarge w3-border-dark-grey w3-padding-16" data-key='tellUs'>Compre a sua moeda</span>
    <p class="w3-opacity" data-key='sendRequest'>Envia-nos o seu pedido</p>
  </div>

  <form class="w3-container containe  custom-block w3-card-4 " id="whatsapp-form" target="_blank" style="margin-top:-50px; border-radius: 10px 10px 10px 10px;"  >
    <div class="w3-section">
      <label for="name-1" data-key='currencyToBuy'>Moeda a comprar</label>
      <input  class="w3-input w3-border w3-hover-border-black w3-opacity d1" type="text" id="name-1" placeholder="€, EUR, Kz ou AOA" required>
      <span id="error-1" class="error" data-key='insertOnlyCurrency'>Insira apenas €, EUR, Kz ou AOA</span>
    </div>
    <div class="w3-section">
      <label for="message-2" data-key='amountToPay'>Montante a pagar</label>
      <input  class="w3-input w3-border w3-hover-border-black  w3-opacity d1" type="text" id="message-2" placeholder="Digite o valor">
      <span id="error-2" class="error" data-key='insiraOnlyNumbers'>Insira apenas números</span>
    </div>
    <pre><button type="submit" class="w3-button w3-block w3-black d1" data-key='send'>Enviar   <i class="fa-brands fa-whatsapp" style="color: #25D366; font-size: 25px"></i></button></pre>
  </form>
</div>

<h4 style="text-align: center; margin-top: 50px; " id="thankYou">
  Obrigado por utilizar os nossos serviços<br>Volte sempre!
</h4>

<p style="text-align: center; margin-top: 50px; margin-bottom: -1000px"><img src="../favicon-96x96.png" alt="Ícone" style="width: 60px; height: 60px; border-radius: 50%;"></p>
  <!-- Footer -->

<footer class="w3-container w3-padding-32  custom-block w3-center w3-card-4 d2" style="margin-top: 1100px;">
  <!-- Grid -->
  <div>
    <div style="display: flex; justify-content: center;  gap: 1px; flex-wrap: wrap;" class="cont">
      <div class="w3-col l3 m6">
        <p class="w3-opacity" style="font-weight: 1000" data-key='legalInfo'><u>Informações legais</u></p>
        <pre><p class="w3-opacity"><a href="#" class="custom-lin" data-key='aboutAuthor'>Sobre o autor</a>   <a href="#" class="custom-lin" data-key='termsOfUse'>Termos de uso</a></p></pre>
        <pre class="w3-opacity"><a href="#" class="custom-lin" data-key='privacyPolicy'>Política de privacidade</a></pre>
      </div>

      <div class="w3-col l3 m6">
        <p class="w3-opacity" style="font-weight: 1000" data-key='usefulLinks'><u>Links úteis</u></p>
        <p class="w3-opacity" ><a href="#" class="custom-lin" data-key='aboutSite'>Sobre o site</a></p>
        <p class="w3-opacity"><a href="#" class="custom-lin" data-key='faq'>FAQ</a></p>
      </div>

      <div class="w3-col l3 m6">
        <p class="w3-opacity" style="font-weight: 1000" data-key='socialMedia'><u>Redes sociais</u></p>
        <pre class="w3-xlarge w3-section w3-opacity"><a href="https://github.com/JoseJDMuxito" target="_blank" class="custom-l"><i class="fa-brands fa-github"></i></a> <a href="https://x.com/jose__muxito" target="_blank" class="custom-l"><i class="fa-brands fa-x-twitter"></i></a> <a href="https://www.linkedin.com/in/jos%C3%A9-muxito-0a2502329/" target="_blank" class="custom-l"><i class="fab fa-linkedin"></i></a> </pre>
      </div>
    </div>

    <p class="w3-opacity" style="font-size: 13px"  data-key='footer'>Criado por José Muxito</p>
  </div>
</footer>


<script>
  document.getElementById("whatsapp-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const siteWhatsAppNumber = "33772026889";
    const name1 = document.getElementById("name-1");
    const message2 = document.getElementById("message-2");
    const error1 = document.getElementById("error-1");
    const error2 = document.getElementById("error-2");

    const currencySymbols = {

      "€": "Kz",
      "EUR": "Kz",
      "Kz": "€",
      "AOA": "€"

    };

    const validCurrencies = Object.keys(currencySymbols);
    const selectedCurrency = name1.value.trim();

    if (!validCurrencies.includes(selectedCurrency)) {
      error1.style.display = "block";
      name1.value = "";
      return;
    } else {
      error1.style.display = "none";
    }

    const currencySymbol = currencySymbols[selectedCurrency];
    const messageValue = message2.value.replace(currencySymbol, "").replace(/\s/g, "").replace(/[^\d]/g, "");

    if (!/^\d+$/.test(messageValue)) {
      error2.style.display = "block";
      message2.value = "";
      return;
    } else {
      error2.style.display = "none";
    }

    const url = `https://wa.me/${siteWhatsAppNumber}?text=${encodeURIComponent(
      `Olá!
Moeda a comprar: ${name1.value}
Montante a pagar: ${messageValue} ${currencySymbol}`
    )}`;

    window.open(url, "_blank");
  });

  // Evento para atualizar dinamicamente o símbolo da moeda na segunda barra
  document.getElementById("name-1").addEventListener("input", function () {
    const name1 = document.getElementById("name-1");
    const message2 = document.getElementById("message-2");

    const currencySymbols = {

      "€": "Kz",
      "EUR": "Kz",
      "Kz": "€",
      "AOA": "€"

    };

    const selectedCurrency = name1.value.trim();
    const currencySymbol = currencySymbols[selectedCurrency] || "";

    message2.placeholder = currencySymbol ? ` ${currencySymbol}` : "";

    message2.addEventListener("input", function () {
      let currentValue = message2.value.replace(currencySymbol, "").replace(/[^\d]/g, "").trim();

      if (currentValue === "") {
        message2.value = "";
        return;
      }

      // Formata o valor numérico
      const formattedValue = Intl.NumberFormat("pt-PT", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
      }).format(currentValue);

      // Atualiza o valor e mantém o cursor antes do símbolo
      message2.value = `${formattedValue} ${currencySymbol}`;

      // Coloca o cursor antes do símbolo
      const cursorPosition = message2.value.length - currencySymbol.length - 1;
      message2.setSelectionRange(cursorPosition, cursorPosition);
    });

    // Corrige comportamento ao sair do campo
    message2.addEventListener("blur", function () {
      let currentValue = message2.value.replace(currencySymbol, "").replace(/[^\d]/g, "").trim();
      if (currentValue !== "" && currencySymbol) {
        const formattedValue = Intl.NumberFormat("pt-PT", {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(currentValue);
        message2.value = `${formattedValue} ${currencySymbol}`;
      }
    });
  });

</script>
  <script src="../js/app.js"></script>
  <script src="../js/translations.js"></script>
</div>

</body>
</html>
