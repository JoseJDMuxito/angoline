<!DOCTYPE html>
<html lang="pt">
<head>
  <title>comecar</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="../css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
  <style>
    html,body,h1,h2,h3,h4,pre {font-family:"Lato", sans-serif}
  </style>
</head>
<body>

<!-- Modo escuro e claro -->
<input type="checkbox" id="theme-switch">
<i class="fa-solid fa-arrow-left custom-link" onclick="history.back()" style="cursor: pointer; font-size: 30px"></i>

<div style="margin-top: -70px">
<!-- Contact -->
<div class="w3-container" >
  <div class="w3-center w3-padding-64" id="contact">
    <span class="w3-xlarge w3-border-dark-grey w3-padding-16" data-i18n="tellUs">Compre a sua moeda</span>
    <p class="w3-opacity" data-i18n="sendRequest">Envia-nos o seu pedido</p>
  </div>

  <form class="w3-container containe custom-block w3-card-4" id="whatsapp-form" target="_blank" style=" border-radius: 10px;">
    <div class="w3-section">
      <label for="name-1" data-i18n="currencyToBuy">Moeda a comprar</label>
      <input class="w3-input w3-border w3-hover-border-black w3-opacity d1" type="text" id="name-1" data-i18n="currencyOptionsPlaceholder" placeholder="€, EUR, Kz ou AOA" required>
      <span id="error-1" class="error" data-i18n="insertOnlyCurrency">Insira apenas €, EUR, Kz ou AOA</span>
    </div>
    <div class="w3-section">
      <label for="message-2" data-i18n="amountToPay">Montante a pagar</label>
      <input class="w3-input w3-border w3-hover-border-black w3-opacity d1" type="text" id="message-2" data-i18n="transactionTypePlaceholder" placeholder="Digite o valor">
      <span id="error-2" class="error" data-i18n="insiraOnlyNumbers">Insira apenas números</span>
    </div>
    <pre><button type="submit" class="w3-button w3-block w3-black d1" data-i18n="send">Enviar   <i class="fa-brands fa-whatsapp" style="color: #25D366; font-size: 25px"></i></button></pre>
  </form>
</div>

<h4 style="text-align: center; margin-top: 20px" data-i18n="thankYou">
  Obrigado por utilizar os nossos serviços<br>Volte sempre!
</h4>

<p style="text-align: center; margin-top: 20px">
  <img src="../img/LOGO.jpg" alt="Ícone" style="width: 40px; height: 40px; border-radius: 50%;">
</p>
</div>
<!-- Footer -->
<footer class="custom-block d2"  style="margin-top: 250px">
  <span>
    <a class="w3-bar-item w3-wide" style="color: rgba(4,50,166,0.8); font-weight: 600; font-size: 16px">
      <img src="../img/LOGO.jpg" alt="LOGO" STYLE="height: 20px; width: 20px; border-radius: 40px;"> Agoline
    </a>
  </span>
  <pre><span class="w3-opacity"><a href="../sobre/sobre.html" class="custom-lin" data-i18n="aboutSite">Sobre</a>         <a href="#" class="custom-lin" data-i18n="termsOfUse">Termos</a>         <a href="#" class="custom-lin" data-i18n="privacyPolicy">Privacidade</a></span></pre>

  <pre><span class="w3-opacity"><a href="https://www.facebook.com/jose.gelson.988" target="_blank" class="custom-l"><i class="fa-brands fa-facebook" style="font-size: 25px"></i></a>   <a href="https://www.instagram.com/muxito_jos/" target="_blank" class="custom-l"><i class="fa-brands fa-instagram" style="font-size: 25px"></i></a>   <a href="https://x.com/jose__muxito" target="_blank" class="custom-l"><i class="fa-brands fa-x-twitter" style="font-size: 25px"></i></a>   <a href="https://www.linkedin.com/in/jos%C3%A9-muxito-0a2502329/" target="_blank" class="custom-l"><i class="fab fa-linkedin" style="font-size: 25px"></i></a></span></pre>

  <p class="w3-opacity" style="font-size: 14px" data-i18n="footer">Criado por José Muxito</p>
</footer>

<script>
  document.getElementById("whatsapp-form").addEventListener("submit", function(e) {
    e.preventDefault();

    const siteWhatsAppNumber = "33772026889";
    const name1 = document.getElementById("name-1");
    const message2 = document.getElementById("message-2");
    const error1 = document.getElementById("error-1");
    const error2 = document.getElementById("error-2");

    const currencySymbols = {
      "€": "Kz",
      "EUR": "Kz",
      "Kz": "€",
      "AOA": "€"
    };

    const validCurrencies = Object.keys(currencySymbols);
    const selectedCurrency = name1.value.trim();

    if (!validCurrencies.includes(selectedCurrency)) {
      error1.style.display = "block";
      name1.value = "";
      return;
    } else {
      error1.style.display = "none";
    }

    const currencySymbol = currencySymbols[selectedCurrency];
    const messageValue = message2.value.replace(currencySymbol, "").replace(/\s/g, "").replace(/[^\d]/g, "");

    if (!/^\d+$/.test(messageValue)) {
      error2.style.display = "block";
      message2.value = "";
      return;
    } else {
      error2.style.display = "none";
    }

    const url = `https://wa.me/${siteWhatsAppNumber}?text=${encodeURIComponent(
      `Olá!
Moeda a comprar: ${name1.value}
Montante a pagar: ${messageValue} ${currencySymbol}`
    )}`;

    window.open(url, "_blank");
  });

  // Evento para atualizar dinamicamente o símbolo da moeda na segunda barra
  document.getElementById("name-1").addEventListener("input", function () {
    const name1 = document.getElementById("name-1");
    const message2 = document.getElementById("message-2");

    const currencySymbols = {

      "€": "Kz",
      "EUR": "Kz",
      "Kz": "€",
      "AOA": "€"

    };

    const selectedCurrency = name1.value.trim();
    const currencySymbol = currencySymbols[selectedCurrency] || "";

    message2.placeholder = currencySymbol ? ` ${currencySymbol}` : "";

    message2.addEventListener("input", function () {
      let currentValue = message2.value.replace(currencySymbol, "").replace(/[^\d]/g, "").trim();

      if (currentValue === "") {
        message2.value = "";
        return;
      }

      // Formata o valor numérico
      const formattedValue = Intl.NumberFormat("pt-PT", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
      }).format(currentValue);

      // Atualiza o valor e mantém o cursor antes do símbolo
      message2.value = `${formattedValue} ${currencySymbol}`;

      // Coloca o cursor antes do símbolo
      const cursorPosition = message2.value.length - currencySymbol.length - 1;
      message2.setSelectionRange(cursorPosition, cursorPosition);
    });

    // Corrige comportamento ao sair do campo
    message2.addEventListener("blur", function () {
      let currentValue = message2.value.replace(currencySymbol, "").replace(/[^\d]/g, "").trim();
      if (currentValue !== "" && currencySymbol) {
        const formattedValue = Intl.NumberFormat("pt-PT", {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(currentValue);
        message2.value = `${formattedValue} ${currencySymbol}`;
      }
    });
  });

</script>
<script src="../js/app.js"></script>
<script src="../js/translations.js"></script>
<script src="../js/main.js" ></script>


</body>
</html>
